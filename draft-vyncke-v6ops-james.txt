



IPv6 Operations                                                E. Vyncke
Internet-Draft                                                     Cisco
Intended status: Informational                                   R. Léas
Expires: 4 September 2022                                      J. Iurman
                                                     Université de Liège
                                                            3 March 2022


   Just Another Measurement of Extension header Survivability (JAMES)
                    draft-vyncke-v6ops-james-latest

Abstract

   In 2016, [RFC7872] has measured the drop of packets with IPv6
   extension headers.  This document presents a slightly different
   methodology with more recent results.  It is still work in progress.

About This Document

   This note is to be removed before publishing as an RFC.

   The latest revision of this draft can be found at
   https://evyncke.github.io/v6ops-james/draft-vyncke-v6ops-james.html.
   Status information for this document may be found at
   https://datatracker.ietf.org/doc/draft-vyncke-v6ops-james/.

   Discussion of this document takes place on the IPv6 Operations
   Working Group mailing list (mailto:v6ops@ietf.org), which is archived
   at https://mailarchive.ietf.org/arch/browse/v6ops/.

   Source for this draft and an issue tracker can be found at
   https://github.com/evyncke/v6ops-james.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 4 September 2022.

Copyright Notice

   Copyright (c) 2022 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction
   2.  Methodology
   3.  Measurements
     3.1.  Vantage Points
       3.1.1.  Tested Autonomous Systems
       3.1.2.  Tested Extension Headers
       3.1.3.  Drop attribution to AS
     3.2.  Results
   4.  Security Considerations
   5.  IANA Considerations
   6.  References
     6.1.  Normative References
     6.2.  Informative References
   Acknowledgments
   Authors' Addresses

1.  Introduction

   In 2016, [RFC7872] has measured the drop of packets with IPv6
   extension headers on their transit over the global Internet.  This
   document presents a slightly different methodology with more recent
   results.  Since then, [I-D.draft-ietf-opsec-ipv6-eh-filtering] has
   provided some recommendations for filtering transit traffic, there
   may be some changes in providers policies.

   It is still work in progress, but the authors wanted to present some
   results at IETF-113 (March 2022).

2.  Methodology

   In a first phase, the measurement is done between collaborating IPv6
   nodes spread over the Internet and multiple Autonomous Systems (ASs).
   As seen in Section 3.1.1, the source/destination/transit ASs include
   some "tier-1" providers per [TIER1], so, they are probably
   representative of the global Internet core.

   Relying on collaborating nodes has some benefits:

   *  traffic timing can be measured accurately to answer whether
      extension headers are slower than plain IP6 packets;

   *  traffic can be captured into .pcap file at the source and at the
      destination for later analysis.

   Future phases will send probes to non-collaborating nodes with a much
   reduced probing speed.  The destination will include [ALEXA] top-n
   websites, popular CDN, as well as random prefix from the IPv6 global
   routing table.  A revision of this IETF draft will describe those
   experiments.

3.  Measurements

3.1.  Vantage Points

   Several servers were used worldwide (albeit missing Africa as authors
   were unable to find IPv6 servers in these regions).  Table 1 lists
   all the vantage points together with their AS number and country.

     +========+===================+==============+===================+
     | ASN    | AS Name           | Country code | Location          |
     +========+===================+==============+===================+
     | 7195   | Edge Uno          | AG           | Buenos Aires      |
     +--------+-------------------+--------------+-------------------+
     | 12414  | NL-SOLCON SOLCON  | NL           | Amsterdam         |
     +--------+-------------------+--------------+-------------------+
     | 14061  | Digital Ocean     | CA           | Toronto, ON       |
     +--------+-------------------+--------------+-------------------+
     | 14061  | Digital Ocean     | USA          | New York City, NY |
     +--------+-------------------+--------------+-------------------+
     | 14601  | Digital Ocean     | DE           | Francfort         |
     +--------+-------------------+--------------+-------------------+
     | 14601  | Digital Ocean     | IN           | Bangalore         |
     +--------+-------------------+--------------+-------------------+
     | 14601  | Digital Ocean     | SG           | Singapore         |
     +--------+-------------------+--------------+-------------------+
     | 16276  | OVH               | AU           | Sydney            |
     +--------+-------------------+--------------+-------------------+
     | 16276  | OVH               | PL           | Warsaw            |
     +--------+-------------------+--------------+-------------------+
     | 44684  | Mythic Beasts     | UK           | Cambridge         |
     +--------+-------------------+--------------+-------------------+
     | 47853  | Hostinger         | US           | Ashville, NC      |
     +--------+-------------------+--------------+-------------------+
     | 60011  | MYTHIC-BEASTS-USA | US           | Fremont, CA       |
     +--------+-------------------+--------------+-------------------+
     | 198644 | GO6               | SI           | Ljubljana         |
     +--------+-------------------+--------------+-------------------+

                          Table 1: All vantage AS

3.1.1.  Tested Autonomous Systems

   During first phase (traffic among fully meshed collaborative nodes),
   our probes have collected data on the following ASs:

   +===========+======================================+===============+
   | AS Number | AS Description                       | Comment       |
   +===========+======================================+===============+
   | 174       | COGENT-174, US                       | Regional Tier |
   +-----------+--------------------------------------+---------------+
   | 1299      | TWELVE99 Twelve99, Telia Carrier, SE | Tier-1        |
   +-----------+--------------------------------------+---------------+
   | 2914      | NTT-COMMUNICATIONS-2914, US          | Tier-1        |
   +-----------+--------------------------------------+---------------+
   | 3320      | DTAG Internet service provider       | Tier-1        |
   |           | operations, DE                       |               |
   +-----------+--------------------------------------+---------------+
   | 3356      | LEVEL3, US                           | Tier-1        |
   +-----------+--------------------------------------+---------------+
   | 4637      | ASN-TELSTRA-GLOBAL Telstra Global,   | Regional Tier |
   |           | HK                                   |               |
   +-----------+--------------------------------------+---------------+
   | 4755      | TATACOMM-AS TATA Communications      |               |
   |           | formerly VSNL is Leading ISP, IN     |               |
   +-----------+--------------------------------------+---------------+
   | 5603      | SIOL-NET Telekom Slovenije d.d., SI  |               |
   +-----------+--------------------------------------+---------------+
   | 6453      | Tata Communication                   | Tier-1        |
   +-----------+--------------------------------------+---------------+
   | 6762      | SEABONE-NET TELECOM ITALIA SPARKLE   | Tier-1        |
   |           | S.p.A., IT                           |               |
   +-----------+--------------------------------------+---------------+
   | 6939      | HURRICANE, US                        | Regional Tier |
   +-----------+--------------------------------------+---------------+
   | 7195      | EDGEUNO SAS, CO                      |               |
   +-----------+--------------------------------------+---------------+
   | 8447      | A1TELEKOM-AT A1 Telekom Austria AG,  |               |
   |           | AT                                   |               |
   +-----------+--------------------------------------+---------------+
   | 9498      | BBIL-AP BHARTI Airtel Ltd., IN       |               |
   +-----------+--------------------------------------+---------------+
   | 12414     | NL-SOLCON SOLCON, NL                 |               |
   +-----------+--------------------------------------+---------------+
   | 14061     | DIGITALOCEAN-ASN, US                 |               |
   +-----------+--------------------------------------+---------------+
   | 16276     | OVH, FR                              |               |
   +-----------+--------------------------------------+---------------+
   | 21283     | A1SI-AS A1 Slovenija, SI             |               |
   +-----------+--------------------------------------+---------------+
   | 34779     | T-2-AS AS set propagated by T-2      |               |
   |           | d.o.o., SI                           |               |
   +-----------+--------------------------------------+---------------+
   | 44684     | MYTHIC Mythic Beasts Ltd, GB         |               |
   +-----------+--------------------------------------+---------------+
   | 60011     | MYTHIC-BEASTS-USA, GB                |               |
   +-----------+--------------------------------------+---------------+
   | 198644    | GO6, SI                              |               |
   +-----------+--------------------------------------+---------------+

               Table 2: All AS (source/destination/transit)

3.1.2.  Tested Extension Headers

   In the first phase among collaborating vantage points, packets always
   contained either a UDP payload or a TCP payload, the latter is sent
   with only the SYN flag set and with data as permitted by section 3.4
   of [RFC793] (2nd paragraph).  A usual traceroute is done with only
   the UDP/TCP payload without any extension header with varying hop-
   limit in order to learn the traversed routers and ASs.  Then, several
   UDP/TCP probes are sent by with a set of extension headers:

   *  destination options header containing either an unknown option
      with the "skip" bits or an unknown option with the "discard" bits
      of varying extension header length: 8, 256, and 512 octets;

   *  hop-by-hop options header containing either an unknown option with
      the "skip" bits or an unknown option with the "discard" bits of
      varying extension header length: 8, 256, and 512 octets;

   *  routing header with routing types from 0 to 6 inclusive ;

   *  atomic fragment header (i.e., more flag = 0 and offset = 0) or
      varying frame length 512, 1280, and 1492 octets;

   *  authentication header with dummy SPI followed by UDP/TCP header
      and a 38 octets payload.

   In the above, length is the length of the extension header itself
   except for the fragmentation header where the length is the frame
   length (i.e., including the Ethernet, IPv6, and TCP/UDP headers +
   payload).

   For hop-by-hop and destination options headers, when required
   multiple PadN options were used in order to bypass some Linux kernels
   that consider a PadN larger than 8 bytes is an attack, see section
   5.3 of [BCP220], even if multiple PadN options violates section
   2.1.9.5 of [RFC4942].

   Next phases will also include packets without UDP/TCP but with Next-
   Header being:

   *  59, "no next header" see section 4.7 of [RFC8200];

   *  143, "ethernet" see section 4.9 of [RFC8986].

3.1.3.  Drop attribution to AS

   Comparing the traceroutes without extension headers and with
   extension headers allow the attribution of a packet drop to one AS.
   But, this is not an easy task as inter-AS links often use IPv6
   address of only one AS (if not using link-local per [RFC7704]).  This
   document uses the following algorithm to attribute the drop to one AS
   for packet sourced in one AS and then having a path traversing AS#foo
   just before AS#bar:

   *  if the packet drop happens at the first router (i.e., hop limit ==
      1 does not trigger an ICMP hop-limit exceeded), then the drop is
      assumed to this AS as it is probably an ingress filter on the
      first router (i.e., the hosting provider in most of the cases -
      except if colocated with an IXP)

   *  if the packet drop happens in AS#foo after one or more hop(s) in
      AS#bar, then the drop is assumed to be in AS#foo ingress filter on
      a router with an interface address in AS#foo

   *  if the packet drop happens in AS#bar after one or more hop(s) in
      AS#bar before going to AS#foo, then the drop is assumed to be in
      AS#foo ingress filter on a router with an interface address in
      AS#bar

   In several cases, the above algorithm was not possible (e.g., some
   intermediate routers do not generate an ICMP unreachable hop limit
   exceeded), then the drop is not attributed.  Please also note that
   the goal of this document is to 'point fingers to operators' but more
   to evaluate the potential impact.  I.e., a tier-1 provider dropping
   packets with extension headers has a much bigger impact on the
   Internet traffic than an access provider.

3.2.  Results

   This section presents the current results out of phase 1
   (collaborating vanytage points) testing.

   Packets with some extension headers were never dropped over the
   Internet: packets with authentication, fragmentation (non-atomic
   fragments), and routing (type different from 0 and 4) headers can
   freely traverse the global Internet without being dropped.

   The table below lists the few AS that drops packets with the routing
   header type 0.

                      +===========+================+
                      | AS Number | AS description |
                      +===========+================+
                      | 6939      | HURRICANE, US  |
                      +-----------+----------------+

                                 Table 3

   It is possibly due to a strict implementation of [RFC5095] but it is
   expected that no packet with routing header type 0 would be
   transmitted anymore.  Other routing header types (mobile IPv6
   [RFC6275], RPL [RFC6554], SRH [RFC8754], and even CRH-16 and CRH-
   32[I-D.draft-bonica-6man-comp-rtg-hdr]) can be transmitted over the
   global Internet without being dropped.

   Some ASs drop packets with hop-by-hop or destination options
   extension headers, see the following table:

        +===========+============================================+
        | AS Number | AS Description                             |
        +===========+============================================+
        | 5603      | SIOL-NET Telekom Slovenije d.d., SI        |
        +-----------+--------------------------------------------+
        | 12414     | NL-SOLCON SOLCON, NL                       |
        +-----------+--------------------------------------------+
        | 34779     | T-2-AS AS set propagated by T-2 d.o.o., SI |
        +-----------+--------------------------------------------+
        | 198644    | GO6, SI                                    |
        +-----------+--------------------------------------------+

                                 Table 4

   The above list seems to include only access providers and no major
   tier providers.

   Finally, some ASs do not drop transit traffic (except for routing
   header type 0) and follow the recommendations of
   [I-D.draft-ietf-opsec-ipv6-eh-filtering].  This list includes tier-1
   transit providers (using the "regional" tag per [TIER1]):

    +===========+==========+==================================+======+
    | AS Number | Tier-1   | AS Description                   | Drop |
    |           |          |                                  | RH0  |
    +===========+==========+==================================+======+
    | 1299      | yes      | TWELVE99 Twelve99, Telia         |      |
    |           |          | Carrier, SE                      |      |
    +-----------+----------+----------------------------------+------+
    | 2914      | yes      | NTT-COMMUNICATIONS-2914, US      |      |
    +-----------+----------+----------------------------------+------+
    | 3320      | yes      | DTAG Internet service provider   |      |
    |           |          | operations, DE                   |      |
    +-----------+----------+----------------------------------+------+
    | 3356      | yes      | LEVEL3, US                       |      |
    +-----------+----------+----------------------------------+------+
    | 4637      | regional | ASN-TELSTRA-GLOBAL Telstra       | drop |
    |           |          | Global, HK                       |      |
    +-----------+----------+----------------------------------+------+
    | 4755      |          | TATACOMM-AS TATA Communications  |      |
    |           |          | formerly VSNL is Leading ISP, IN |      |
    +-----------+----------+----------------------------------+------+
    | 6453      | yes      | Tata Communications              |      |
    +-----------+----------+----------------------------------+------+
    | 6939      | regional | HURRICANE, US                    | drop |
    +-----------+----------+----------------------------------+------+
    | 9498      |          | BBIL-AP BHARTI Airtel Ltd., IN   |      |
    +-----------+----------+----------------------------------+------+
    | 14061     |          | DIGITALOCEAN-ASN, US             |      |
    +-----------+----------+----------------------------------+------+

                                 Table 5

4.  Security Considerations

   While active probing of the Internet may be considered as an attack,
   this measurement was done among collaborating parties and using the
   probe attribution technique described in
   [I-D.draft-vyncke-opsec-probe-attribution].

5.  IANA Considerations

   This document has no IANA actions.

6.  References

6.1.  Normative References

   [RFC793]   Postel, J., "Transmission Control Protocol", STD 7,
              RFC 793, DOI 10.17487/RFC0793, September 1981,
              <https://www.rfc-editor.org/rfc/rfc793>.

   [RFC8200]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", STD 86, RFC 8200,
              DOI 10.17487/RFC8200, July 2017,
              <https://www.rfc-editor.org/rfc/rfc8200>.

   [RFC8986]  Filsfils, C., Ed., Camarillo, P., Ed., Leddy, J., Voyer,
              D., Matsushima, S., and Z. Li, "Segment Routing over IPv6
              (SRv6) Network Programming", RFC 8986,
              DOI 10.17487/RFC8986, February 2021,
              <https://www.rfc-editor.org/rfc/rfc8986>.

6.2.  Informative References

   [ALEXA]    "The top 500 sites on the web", n.d.,
              <https://www.alexa.com/topsites>.

   [BCP220]   Chown, T., Loughney, J., and T. Winters, "IPv6 Node
              Requirements", BCP 220, RFC 8504, January 2019.

              <https://www.rfc-editor.org/info/bcp220>

   [I-D.draft-bonica-6man-comp-rtg-hdr]
              Bonica, R., Kamite, Y., Alston, A., Henriques, D., and L.
              Jalil, "The IPv6 Compact Routing Header (CRH)", Work in
              Progress, Internet-Draft, draft-bonica-6man-comp-rtg-hdr-
              27, 15 November 2021,
              <https://datatracker.ietf.org/doc/html/draft-bonica-6man-
              comp-rtg-hdr-27>.

   [I-D.draft-ietf-opsec-ipv6-eh-filtering]
              Gont, F. and W. (. Liu, "Recommendations on the Filtering
              of IPv6 Packets Containing IPv6 Extension Headers at
              Transit Routers", Work in Progress, Internet-Draft, draft-
              ietf-opsec-ipv6-eh-filtering-08, 3 June 2021,
              <https://datatracker.ietf.org/doc/html/draft-ietf-opsec-
              ipv6-eh-filtering-08>.

   [I-D.draft-vyncke-opsec-probe-attribution]
              Vyncke, É., Donnet, B., and J. Iurman, "Attribution of
              Internet Probes", Work in Progress, Internet-Draft, draft-
              vyncke-opsec-probe-attribution-01, 3 March 2022,
              <https://datatracker.ietf.org/doc/html/draft-vyncke-opsec-
              probe-attribution-01>.

   [RFC4942]  Davies, E., Krishnan, S., and P. Savola, "IPv6 Transition/
              Co-existence Security Considerations", RFC 4942,
              DOI 10.17487/RFC4942, September 2007,
              <https://www.rfc-editor.org/rfc/rfc4942>.

   [RFC5095]  Abley, J., Savola, P., and G. Neville-Neil, "Deprecation
              of Type 0 Routing Headers in IPv6", RFC 5095,
              DOI 10.17487/RFC5095, December 2007,
              <https://www.rfc-editor.org/rfc/rfc5095>.

   [RFC6275]  Perkins, C., Ed., Johnson, D., and J. Arkko, "Mobility
              Support in IPv6", RFC 6275, DOI 10.17487/RFC6275, July
              2011, <https://www.rfc-editor.org/rfc/rfc6275>.

   [RFC6554]  Hui, J., Vasseur, JP., Culler, D., and V. Manral, "An IPv6
              Routing Header for Source Routes with the Routing Protocol
              for Low-Power and Lossy Networks (RPL)", RFC 6554,
              DOI 10.17487/RFC6554, March 2012,
              <https://www.rfc-editor.org/rfc/rfc6554>.

   [RFC7704]  Crocker, D. and N. Clark, "An IETF with Much Diversity and
              Professional Conduct", RFC 7704, DOI 10.17487/RFC7704,
              November 2015, <https://www.rfc-editor.org/rfc/rfc7704>.

   [RFC7872]  Gont, F., Linkova, J., Chown, T., and W. Liu,
              "Observations on the Dropping of Packets with IPv6
              Extension Headers in the Real World", RFC 7872,
              DOI 10.17487/RFC7872, June 2016,
              <https://www.rfc-editor.org/rfc/rfc7872>.

   [RFC8754]  Filsfils, C., Ed., Dukes, D., Ed., Previdi, S., Leddy, J.,
              Matsushima, S., and D. Voyer, "IPv6 Segment Routing Header
              (SRH)", RFC 8754, DOI 10.17487/RFC8754, March 2020,
              <https://www.rfc-editor.org/rfc/rfc8754>.

   [TIER1]    "Tier 1 network", n.d.,
              <https://en.wikipedia.org/wiki/Tier_1_network>.

Acknowledgments

   The authors want to thank Sander Steffann and Jan Zorz for allowing
   the use of their labs.  Other to Fernando Gont who indicated a nice
   IPv6 hosting provider in South America.

   Special thanks as well to professor Benoit Donnet for his support and
   advices.  This document would not have existed without his support.

Authors' Addresses

   Éric Vyncke
   Cisco
   De Kleetlaan 64
   1831 Diegem
   Belgium
   Email: evyncke@cisco.com


   Raphaël Léas
   Université de Liège
   Liège
   Belgium
   Email: raphael.leas@student.uliege.be


   Justin Iurman
   Université de Liège
   Belgium
   Email: justin.iurman@uliege.be
